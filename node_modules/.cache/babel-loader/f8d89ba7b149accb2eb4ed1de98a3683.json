{"ast":null,"code":"import _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/allie/Project/client-thecurrent/src/components/Blog/Blog.jsx\";\nimport \"./Blog.css\";\nimport { Card, Modal } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport CategoryBadge from \"../Badge/CategoryBadge\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport DatePublished from \"../DatePublished/DatePublished\";\nimport { FaShare } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport { Loader } from \"@mantine/core\";\nimport { MdContentCopy } from \"react-icons/md\";\nimport NavBar from \"../NavBar/NavBar\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\nexport default function Blog() {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var location = window.location.href;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      blog = _useState2[0],\n      setBlog = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 1),\n      setLiked = _useState4[0];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loggedIn = _useState6[0],\n      setLoggedIn = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userId = _useState8[0],\n      setUserId = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      copied = _useState10[0],\n      setCopied = _useState10[1]; // const [show, setShow] = useState(false);\n\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showModal = _useState12[0],\n      setShowModal = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      loading = _useState14[0],\n      setLoading = _useState14[1];\n\n  var handleModalClose = function handleModalClose() {\n    return setShowModal(false);\n  };\n\n  var handleModalShow = function handleModalShow() {\n    return setShowModal(true);\n  }; // const handleClose = () => setShow(false);\n  // const handleShow = () => setShow(true);\n\n\n  useEffect(function () {\n    if (localStorage.getItem(\"token\")) {\n      axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/data\"), {\n        token: localStorage.getItem(\"token\")\n      }).then(function (res) {\n        setLoggedIn(true);\n        setUserId(res.data.id);\n      }).catch(function (err) {\n        localStorage.removeItem(\"token\");\n        setLoggedIn(false);\n      });\n    }\n\n    axios.get(\"\".concat(process.env.REACT_APP_BASE_URL, \"/post/\").concat(id)).then(function (res) {\n      setBlog(res.data.blog);\n\n      if (loggedIn) {\n        // eslint-disable-next-line\n        res.data.blog.likes.map(function (like) {\n          if (like === userId) {\n            setLiked(true);\n          }\n        });\n      }\n\n      setLoading(false);\n    }).catch(function (err) {\n      setLoading(false); // console.log(err);\n    });\n  }, [id, loggedIn, userId]); // const handleLike = (id) => {\n  //   if (loggedIn) {\n  //     if (!liked) {\n  //       axios\n  //         .post(`/api/user/post/like/${id}`, {\n  //           user_id: userId,\n  //         })\n  //         .then((res) => {\n  //           setBlog(res.data.blog);\n  //           if (loggedIn) {\n  //             // eslint-disable-next-line\n  //             res.data.blog.likes.map((like) => {\n  //               if (like === userId) {\n  //                 setLiked(true);\n  //               }\n  //             });\n  //           }\n  //         })\n  //         .catch((err) => {\n  //           console.log(err);\n  //         });\n  //     } else {\n  //       axios\n  //         .post(\n  //           `/api/user/post/unlike/${id}`,\n  //           {\n  //             user_id: userId,\n  //           }\n  //         )\n  //         .then((res) => {\n  //           setBlog(res.data.blog);\n  //           if (loggedIn) {\n  //             // eslint-disable-next-line\n  //             res.data.blog.likes.map((like) => {\n  //               if (like === userId) {\n  //                 setLiked(true);\n  //               }\n  //             });\n  //             setLiked(false);\n  //           }\n  //         })\n  //         .catch((err) => {\n  //           console.log(err);\n  //         });\n  //     }\n  //   }\n  // };\n  // const addComment = (id) => {\n  //   axios\n  //     .post(`/api/user/post/comment/${id}`, {\n  //       user_id: userId,\n  //       comment: document.getElementById(\"comment\").value,\n  //     })\n  //     .then((res) => {\n  //       setBlog(res.data.blog);\n  //       document.getElementById(\"comment\").value = \"\";\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //     });\n  // };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blog-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    size: \"sm\",\n    variant: \"bars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, blog.title), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"postHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dateCategory\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(DatePublished, {\n    blog: blog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(CategoryBadge, {\n    blog: blog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"utility-item share\",\n    onClick: handleModalShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FaShare, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }))), blog.cloudinaryId ? /*#__PURE__*/React.createElement(Card.Img, {\n    className: \"blog-image\",\n    src: blog.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"author-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }, \"Author: \"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }, \"Chisom Emmanual\")), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blog-content\",\n    dangerouslySetInnerHTML: {\n      __html: blog.content\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(Modal, {\n    className: \"copy-link\",\n    show: showModal,\n    onHide: handleModalClose,\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  }, \"Copy Link\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"copy-link-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 19\n    }\n  }, location), \" \", /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: location,\n    className: \"copy\",\n    onCopy: function onCopy() {\n      setCopied(true);\n      setTimeout(function () {\n        setCopied(false);\n      }, 1000);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MdContentCopy, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 21\n    }\n  }))), copied ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"copied-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 21\n    }\n  }, \"Copied to clipboard\")) : null)))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/allie/Project/client-thecurrent/src/components/Blog/Blog.jsx"],"names":["Card","Modal","React","useEffect","useState","CategoryBadge","CopyToClipboard","DatePublished","FaShare","Footer","Loader","MdContentCopy","NavBar","axios","useParams","Blog","id","location","window","href","blog","setBlog","setLiked","loggedIn","setLoggedIn","userId","setUserId","copied","setCopied","showModal","setShowModal","loading","setLoading","handleModalClose","handleModalShow","localStorage","getItem","post","process","env","REACT_APP_BASE_URL","token","then","res","data","catch","err","removeItem","get","likes","map","like","title","cloudinaryId","image","__html","content","setTimeout"],"mappings":"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","sourcesContent":["import \"./Blog.css\";\n\nimport { Card, Modal } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\n\nimport CategoryBadge from \"../Badge/CategoryBadge\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport DatePublished from \"../DatePublished/DatePublished\";\nimport { FaShare } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport { Loader } from \"@mantine/core\";\nimport { MdContentCopy } from \"react-icons/md\";\nimport NavBar from \"../NavBar/NavBar\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function Blog() {\n  const { id } = useParams();\n\n  const location = window.location.href;\n\n  const [blog, setBlog] = useState({});\n  const [setLiked] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userId, setUserId] = useState(\"\");\n  const [copied, setCopied] = useState(false);\n  // const [show, setShow] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const handleModalClose = () => setShowModal(false);\n  const handleModalShow = () => setShowModal(true);\n\n  // const handleClose = () => setShow(false);\n  // const handleShow = () => setShow(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      axios\n        .post(`${process.env.REACT_APP_BASE_URL}/data`, {\n          token: localStorage.getItem(\"token\"),\n        })\n        .then((res) => {\n          setLoggedIn(true);\n          setUserId(res.data.id);\n        })\n        .catch((err) => {\n          localStorage.removeItem(\"token\");\n          setLoggedIn(false);\n        });\n    }\n    axios\n      .get(`${process.env.REACT_APP_BASE_URL}/post/${id}`)\n      .then((res) => {\n        setBlog(res.data.blog);\n        if (loggedIn) {\n          // eslint-disable-next-line\n          res.data.blog.likes.map((like) => {\n            if (like === userId) {\n              setLiked(true);\n            }\n          });\n        }\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        // console.log(err);\n      });\n  }, [id, loggedIn, userId]);\n\n  // const handleLike = (id) => {\n  //   if (loggedIn) {\n  //     if (!liked) {\n  //       axios\n  //         .post(`/api/user/post/like/${id}`, {\n  //           user_id: userId,\n  //         })\n  //         .then((res) => {\n  //           setBlog(res.data.blog);\n  //           if (loggedIn) {\n  //             // eslint-disable-next-line\n  //             res.data.blog.likes.map((like) => {\n  //               if (like === userId) {\n  //                 setLiked(true);\n  //               }\n  //             });\n  //           }\n  //         })\n  //         .catch((err) => {\n  //           console.log(err);\n  //         });\n  //     } else {\n  //       axios\n  //         .post(\n  //           `/api/user/post/unlike/${id}`,\n  //           {\n  //             user_id: userId,\n  //           }\n  //         )\n  //         .then((res) => {\n  //           setBlog(res.data.blog);\n  //           if (loggedIn) {\n  //             // eslint-disable-next-line\n  //             res.data.blog.likes.map((like) => {\n  //               if (like === userId) {\n  //                 setLiked(true);\n  //               }\n  //             });\n  //             setLiked(false);\n  //           }\n  //         })\n  //         .catch((err) => {\n  //           console.log(err);\n  //         });\n  //     }\n  //   }\n  // };\n\n  // const addComment = (id) => {\n  //   axios\n  //     .post(`/api/user/post/comment/${id}`, {\n  //       user_id: userId,\n  //       comment: document.getElementById(\"comment\").value,\n  //     })\n  //     .then((res) => {\n  //       setBlog(res.data.blog);\n  //       document.getElementById(\"comment\").value = \"\";\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //     });\n  // };\n\n  return (\n    <>\n      <NavBar />\n      <div className=\"blog-container\">\n        {loading ? (\n          <div className=\"loader\">\n            <Loader size=\"sm\" variant=\"bars\" />\n          </div>\n        ) : (\n          <>\n            {/* <div className=\"utilities\">\n              {loggedIn ? (\n                <>\n                  <div\n                    className={`utility-item like ${liked ? \"liked\" : \"\"}`}\n                    onClick={() => {\n                      handleLike(id);\n                    }}\n                  >\n                    <AiOutlineHeart />{\" \"}\n                    <span>{blog.likes ? blog.likes.length : 0}</span>\n                  </div>\n                  <div className=\"utility-item comment\" onClick={handleShow}>\n                    <FaRegComment />{\" \"}\n                    <span>{blog.comments ? blog.comments.length : 0}</span>\n                  </div>\n                  <div className=\"utility-item share\" onClick={handleModalShow}>\n                    <FaShare />\n                  </div>\n                </>\n              ) : (\n                <div className=\"account-alert\">Login to like and comment</div>\n              )}\n            </div> */}\n            <div className=\"blog\">\n              <Card>\n                <h1>{blog.title}</h1>\n                <div className=\"postHeader\">\n                  <div className=\"dateCategory\">\n                    <DatePublished blog={blog} />\n                    <span id=\"divider\"></span>\n                    <CategoryBadge blog={blog} />\n                  </div>\n\n                  <div className=\"utility-item share\" onClick={handleModalShow}>\n                    <FaShare />\n                  </div>\n                </div>\n                {blog.cloudinaryId ? (\n                  <Card.Img className=\"blog-image\" src={blog.image} />\n                ) : null}\n                <div className=\"author\">\n                  <span className=\"author-label\">Author: </span>{\" \"}\n                  <span className=\"author\">Chisom Emmanual</span>\n                </div>\n                <Card.Body>\n                  <div\n                    className=\"blog-content\"\n                    dangerouslySetInnerHTML={{ __html: blog.content }}\n                  ></div>\n                </Card.Body>\n              </Card>\n            </div>\n            {/* <Offcanvas show={show} placement=\"end\" onHide={handleClose}>\n              <Offcanvas.Header closeButton>\n                <Offcanvas.Title>Discussion</Offcanvas.Title>\n              </Offcanvas.Header>\n              <Offcanvas.Body> */}\n            {/* <div className=\"comment-box\">\n                  <Form\n                    onSubmit={(e) => {\n                      e.preventDefault();\n                      addComment(id);\n                    }}\n                  >\n                    <Form.Group>\n                      <Form.Label>Add New Comment</Form.Label>\n                      <Form.Control id=\"comment\" as=\"textarea\" rows=\"3\" />\n                    </Form.Group>\n                    <Button variant=\"success\" type=\"submit\" className=\"mt-3\">\n                      Comment\n                    </Button>\n                  </Form>\n                </div> */}\n            {/* <div className=\"comment-container\">\n                  {blog.comments ? (\n                    blog.comments.reverse().map((comment) => {\n                      return (\n                        <Card className=\"comment\" key={comment._id}>\n                          <div className=\"comment-author\">{comment.name}</div>\n                          <div className=\"comment-date\">\n                            {new Date(comment.date).toDateString()}\n                          </div>\n                          <div className=\"comment-content\">\n                            {comment.comment}\n                          </div>\n                        </Card>\n                      );\n                    })\n                  ) : (\n                    <div>No comments yet</div>\n                  )}\n                </div> */}\n            {/* </Offcanvas.Body>\n            </Offcanvas> */}\n            <Modal\n              className=\"copy-link\"\n              show={showModal}\n              onHide={handleModalClose}\n              centered\n            >\n              <Modal.Header closeButton>\n                <Modal.Title>Copy Link</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <div className=\"copy-link-container\">\n                  <span className=\"url\">{location}</span>{\" \"}\n                  <CopyToClipboard\n                    text={location}\n                    className=\"copy\"\n                    onCopy={() => {\n                      setCopied(true);\n                      setTimeout(() => {\n                        setCopied(false);\n                      }, 1000);\n                    }}\n                  >\n                    <MdContentCopy />\n                  </CopyToClipboard>\n                </div>\n                {copied ? (\n                  <div className=\"copied-text\">\n                    <span>Copied to clipboard</span>\n                  </div>\n                ) : null}\n              </Modal.Body>\n            </Modal>\n          </>\n        )}\n      </div>\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}