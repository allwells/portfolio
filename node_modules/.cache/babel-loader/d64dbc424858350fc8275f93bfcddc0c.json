{"ast":null,"code":"import _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/allie/Project/client-thecurrent/src/components/EditPost/EditPost.jsx\";\nimport \"./EditPost.css\";\nimport { Button, Card, Container, Form, Spinner } from \"react-bootstrap\";\nimport { Input, InputWrapper } from \"@mantine/core\";\nimport React, { useEffect, useState } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@aaditya1978/ckeditor5-build-classic\";\nimport Footer from \"../Footer/Footer\";\nimport NavBar from \"../NavBar/NavBar\";\nimport Notify from \"../Notification/Notify\";\nimport SelectForm from \"../SelectForm/SelectForm\";\nimport axios from \"axios\";\nexport default function EditPost() {\n  var navigate = useNavigate();\n\n  var notifySuccess = function notifySuccess() {\n    return toast.success(\"Updated Successfully!\");\n  };\n\n  var notifyError = function notifyError(message) {\n    return toast.error(message);\n  };\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      category = _useState4[0],\n      setCategory = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      author = _useState6[0],\n      setAuthor = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      content = _useState8[0],\n      setContent = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      image = _useState10[0],\n      setImage = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      imageData = _useState12[0],\n      setImageData = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      imageName = _useState14[0],\n      setImageName = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      submitting = _useState16[0],\n      setSubmitting = _useState16[1];\n\n  useEffect(function () {\n    if (!localStorage.getItem(\"token\")) {\n      navigate(\"/login\");\n    }\n\n    axios.get(\"\".concat(process.env.REACT_APP_BASE_URL, \"/post/\").concat(id)).then(function (res) {\n      setTitle(res.data.blog.title);\n      setCategory(res.data.blog.category);\n      setAuthor(res.data.blog.author);\n      setContent(res.data.blog.content);\n      setImageData(res.data.blog.image);\n      setImage(res.data.blog.image);\n    }).catch(function (err) {\n      navigate(\"/login\");\n    });\n  }, [navigate, id]);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setSubmitting(true);\n    var sanitizeContent = content.trim();\n\n    if (sanitizeContent.length < 200) {\n      notifyError(\"Content must be at least 200 characters long\");\n      setSubmitting(false);\n      return;\n    }\n\n    var formData = new FormData();\n    formData.append(\"id\", id);\n    formData.append(\"title\", title);\n    formData.append(\"author\", author);\n    formData.append(\"category\", category);\n    formData.append(\"content\", sanitizeContent);\n    formData.append(\"image\", imageData);\n    formData.append(\"date\", new Date());\n    formData.append(\"token\", localStorage.getItem(\"token\"));\n    axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/edit\"), formData).then(function (res) {\n      setSubmitting(false);\n      notifySuccess();\n      setTimeout(function () {\n        navigate(\"/news/\".concat(id));\n      }, 2100);\n    }).catch(function (err) {\n      setSubmitting(false);\n      notifyError(err.response.data.error);\n\n      if (err.response.status === 401) {\n        navigate(\"/login\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"editpost-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, \"Edit Post\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SelectForm, {\n    category: category,\n    setCategory: setCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(InputWrapper, {\n    style: {\n      marginBottom: \"1rem\"\n    },\n    id: \"input-demo\",\n    label: \"Author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"input-demo\",\n    placeholder: \"Author name\",\n    value: author,\n    onChange: function onChange(event) {\n      return setAuthor(event.currentTarget.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"Add Cover Image\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"File\",\n    accept: \"image/*\",\n    value: imageName,\n    onChange: function onChange(e) {\n      setImage(URL.createObjectURL(e.target.files[0]));\n      setImageData(e.target.files[0]);\n      setImageName(e.target.value);\n    },\n    name: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }), image && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img-preview\",\n    src: image,\n    alt: \"preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }), image && /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    className: \"remove-image\",\n    onClick: function onClick() {\n      setImage(null);\n      setImageData(null);\n      setImageName(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, \"Remove\")), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    className: \"postTitle\",\n    placeholder: \"Post Title Here\",\n    value: title,\n    onChange: function onChange(e) {\n      setTitle(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(CKEditor, {\n    editor: ClassicEditor,\n    onChange: function onChange(event, editor) {\n      var data = editor.getData();\n      setContent(data);\n    },\n    data: content,\n    config: {\n      placeholder: \"Start typing your blog here...\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, Object.assign({\n    type: \"submit\",\n    variant: \"success\",\n    className: \"mt-3 submit\"\n  }, submitting ? {\n    disabled: true\n  } : {}, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }), submitting ? /*#__PURE__*/React.createElement(Spinner, {\n    as: \"span\",\n    animation: \"border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }) : \"Publish\")))))), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/allie/Project/client-thecurrent/src/components/EditPost/EditPost.jsx"],"names":["Button","Card","Container","Form","Spinner","Input","InputWrapper","React","useEffect","useState","toast","Toaster","useNavigate","useParams","CKEditor","ClassicEditor","Footer","NavBar","Notify","SelectForm","axios","EditPost","navigate","notifySuccess","success","notifyError","message","error","id","title","setTitle","category","setCategory","author","setAuthor","content","setContent","image","setImage","imageData","setImageData","imageName","setImageName","submitting","setSubmitting","localStorage","getItem","get","process","env","REACT_APP_BASE_URL","then","res","data","blog","catch","err","handleSubmit","e","preventDefault","sanitizeContent","trim","length","formData","FormData","append","Date","post","setTimeout","response","status","marginBottom","event","currentTarget","value","URL","createObjectURL","target","files","editor","getData","placeholder","disabled"],"mappings":"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","sourcesContent":["import \"./EditPost.css\";\n\nimport { Button, Card, Container, Form, Spinner } from \"react-bootstrap\";\nimport { Input, InputWrapper } from \"@mantine/core\";\nimport React, { useEffect, useState } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@aaditya1978/ckeditor5-build-classic\";\nimport Footer from \"../Footer/Footer\";\nimport NavBar from \"../NavBar/NavBar\";\nimport Notify from \"../Notification/Notify\";\nimport SelectForm from \"../SelectForm/SelectForm\";\nimport axios from \"axios\";\n\nexport default function EditPost() {\n  const navigate = useNavigate();\n\n  const notifySuccess = () => toast.success(\"Updated Successfully!\");\n  const notifyError = (message) => toast.error(message);\n\n  const { id } = useParams();\n\n  const [title, setTitle] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [imageData, setImageData] = useState(null);\n  const [imageName, setImageName] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"token\")) {\n      navigate(\"/login\");\n    }\n    axios\n      .get(`${process.env.REACT_APP_BASE_URL}/post/${id}`)\n      .then((res) => {\n        setTitle(res.data.blog.title);\n        setCategory(res.data.blog.category);\n        setAuthor(res.data.blog.author);\n        setContent(res.data.blog.content);\n        setImageData(res.data.blog.image);\n        setImage(res.data.blog.image);\n      })\n      .catch((err) => {\n        navigate(\"/login\");\n      });\n  }, [navigate, id]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setSubmitting(true);\n    const sanitizeContent = content.trim();\n    if (sanitizeContent.length < 200) {\n      notifyError(\"Content must be at least 200 characters long\");\n      setSubmitting(false);\n\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"id\", id);\n    formData.append(\"title\", title);\n    formData.append(\"author\", author);\n    formData.append(\"category\", category);\n    formData.append(\"content\", sanitizeContent);\n    formData.append(\"image\", imageData);\n    formData.append(\"date\", new Date());\n    formData.append(\"token\", localStorage.getItem(\"token\"));\n\n    axios\n      .post(`${process.env.REACT_APP_BASE_URL}/edit`, formData)\n      .then((res) => {\n        setSubmitting(false);\n\n        notifySuccess();\n\n        setTimeout(() => {\n          navigate(`/news/${id}`);\n        }, 2100);\n      })\n      .catch((err) => {\n        setSubmitting(false);\n        notifyError(err.response.data.error);\n        if (err.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  return (\n    <>\n      <NavBar />\n      <div className=\"editpost-container\">\n        <Container>\n          <Card>\n            <Card.Body>\n              <h1 className=\"heading\">Edit Post</h1>\n              <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"mb-3\">\n                  <SelectForm category={category} setCategory={setCategory} />\n                  <InputWrapper\n                    style={{ marginBottom: \"1rem\" }}\n                    id=\"input-demo\"\n                    label=\"Author\"\n                  >\n                    <Input\n                      id=\"input-demo\"\n                      placeholder=\"Author name\"\n                      value={author}\n                      onChange={(event) => setAuthor(event.currentTarget.value)}\n                    />\n                  </InputWrapper>\n                  <Form.Label>Add Cover Image</Form.Label>\n                  <Form.Control\n                    type=\"File\"\n                    accept=\"image/*\"\n                    value={imageName}\n                    onChange={(e) => {\n                      setImage(URL.createObjectURL(e.target.files[0]));\n                      setImageData(e.target.files[0]);\n                      setImageName(e.target.value);\n                    }}\n                    name=\"image\"\n                  />\n                  {image && (\n                    <img className=\"img-preview\" src={image} alt=\"preview\" />\n                  )}\n                  <br />\n                  {image && (\n                    <Button\n                      variant=\"primary\"\n                      className=\"remove-image\"\n                      onClick={() => {\n                        setImage(null);\n                        setImageData(null);\n                        setImageName(\"\");\n                      }}\n                    >\n                      Remove\n                    </Button>\n                  )}\n                </Form.Group>\n                <Form.Group className=\"mb-3\">\n                  <Form.Control\n                    type=\"text\"\n                    className=\"postTitle\"\n                    placeholder=\"Post Title Here\"\n                    value={title}\n                    onChange={(e) => {\n                      setTitle(e.target.value);\n                    }}\n                    required\n                  />\n                </Form.Group>\n                <CKEditor\n                  editor={ClassicEditor}\n                  onChange={(event, editor) => {\n                    const data = editor.getData();\n                    setContent(data);\n                  }}\n                  data={content}\n                  config={{\n                    placeholder: \"Start typing your blog here...\",\n                  }}\n                />\n                <Button\n                  type=\"submit\"\n                  variant=\"success\"\n                  className=\"mt-3 submit\"\n                  {...(submitting ? { disabled: true } : {})}\n                >\n                  {submitting ? (\n                    <Spinner as=\"span\" animation=\"border\" role=\"status\" />\n                  ) : (\n                    \"Publish\"\n                  )}\n                </Button>\n              </Form>\n            </Card.Body>\n          </Card>\n        </Container>\n      </div>\n      <Toaster />\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}