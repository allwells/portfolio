{"ast":null,"code":"import _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx\";\nimport \"./Profile.css\";\nimport { Button, Card } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport Identicon from \"react-identicons\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport Notify from \"../Notification/Notify\";\nimport Purify from \"../../utils/Purify\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function Profile() {\n  var _this = this;\n\n  var navigate = useNavigate(); // eslint-disable-next-line\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      blogs = _useState6[0],\n      setBlogs = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      likedBlogs = _useState8[0],\n      setLikedBlogs = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 1),\n      isBlog = _useState10[0];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      notify = _useState14[0],\n      setNotify = _useState14[1];\n\n  useEffect(function () {\n    if (localStorage.getItem(\"token\")) {\n      axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/api/user/profile\"), {\n        token: localStorage.getItem(\"token\")\n      }).then(function (res) {\n        setName(res.data.name);\n        setEmail(res.data.email);\n        setBlogs(res.data.blogs);\n        setLikedBlogs(res.data.likedBlogs);\n        setLoading(!loading);\n      }).catch(function (err) {\n        setLoading(!loading);\n        navigate(\"/login\");\n      });\n    } else {\n      setInterval(function () {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  var handlePost = function handlePost(id) {\n    navigate(\"/blog/\".concat(id));\n  };\n\n  var handleDelete = function handleDelete(id) {\n    axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/api/user/delete\"), {\n      token: localStorage.getItem(\"token\"),\n      id: id\n    }).then(function (res) {\n      setBlogs(res.data.blogs);\n      setLikedBlogs(res.data.likedBlogs);\n      setNotify(!notify);\n      setTimeout(function () {\n        setNotify(!notify);\n      }, 1000);\n    }).catch(function (err) {\n      if (err.response.status === 401) {\n        navigate(\"/login\");\n      }\n    });\n  };\n\n  var handleEdit = function handleEdit(id) {\n    navigate(\"/edit/\".concat(id));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Profile\"), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"basic-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Identicon, {\n    className: \"user-icon\",\n    string: email,\n    size: 85,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, \"Posts Published - \", blogs.length)))))), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    size: \"lg\",\n    variant: \"bars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-blogs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, isBlog ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Your Posts\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, blogs.reverse().map(function (blog) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"blog-card\",\n      key: blog._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 23\n      }\n    }, blog.cloudinaryId ? /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"top\",\n      src: blog.image,\n      className: \"blogLink\",\n      onClick: function onClick() {\n        return handlePost(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 27\n      }\n    }) : null, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"blogLink\",\n      onClick: function onClick() {\n        return handlePost(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 27\n      }\n    }, blog.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"createdAt\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"date\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, new Date(blog.created_at).toDateString()), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"category\",\n      onClick: function onClick() {\n        return console.log(\"Category clicked!\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 29\n      }\n    }, Purify(blog.category))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"editBtn\",\n      onClick: function onClick() {\n        handleEdit(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"deleteBtn\",\n      onClick: function onClick() {\n        handleDelete(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, \"Delete\"))));\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, \"Liked Blogs\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, likedBlogs.map(function (blog) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"blog-card\",\n      key: blog._id,\n      onClick: function onClick() {\n        handlePost(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 23\n      }\n    }, blog.cloudinaryId ? /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"top\",\n      src: blog.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 27\n      }\n    }) : null, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 27\n      }\n    }, blog.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 27\n      }\n    }, blog.author), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 27\n      }\n    }, new Date(blog.created_at).toDateString()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AiOutlineHeart, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 31\n      }\n    }), \" \", blog.likes.length, \" Reactions\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FaRegComment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 31\n      }\n    }), \" \", blog.comments.length, \" Comments\"))));\n  }))))), /*#__PURE__*/React.createElement(Notify, {\n    notify: notify,\n    title: \"Post deleted successfully!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx"],"names":["Button","Card","React","useEffect","useState","AiOutlineHeart","FaRegComment","Footer","Identicon","Loader","NavBar","Notify","Purify","axios","useNavigate","Profile","navigate","name","setName","email","setEmail","blogs","setBlogs","likedBlogs","setLikedBlogs","isBlog","loading","setLoading","notify","setNotify","localStorage","getItem","post","process","env","REACT_APP_BASE_URL","token","then","res","data","catch","err","setInterval","handlePost","id","handleDelete","setTimeout","response","status","handleEdit","length","reverse","map","blog","_id","cloudinaryId","image","title","Date","created_at","toDateString","console","log","category","author","likes","comments"],"mappings":";;AAAA,OAAO,eAAP;AAEA,SAASA,MAAT,EAAiBC,IAAjB,QAA6B,iBAA7B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA;;AAChC,MAAMC,QAAQ,GAAGF,WAAW,EAA5B,CADgC,CAEhC;;AAFgC,kBAGRV,QAAQ,CAAC,EAAD,CAHA;AAAA;AAAA,MAGzBa,IAHyB;AAAA,MAGnBC,OAHmB;;AAAA,mBAINd,QAAQ,CAAC,EAAD,CAJF;AAAA;AAAA,MAIzBe,KAJyB;AAAA,MAIlBC,QAJkB;;AAAA,mBAKNhB,QAAQ,CAAC,EAAD,CALF;AAAA;AAAA,MAKzBiB,KALyB;AAAA,MAKlBC,QALkB;;AAAA,mBAMIlB,QAAQ,CAAC,EAAD,CANZ;AAAA;AAAA,MAMzBmB,UANyB;AAAA,MAMbC,aANa;;AAAA,mBAOfpB,QAAQ,CAAC,IAAD,CAPO;AAAA;AAAA,MAOzBqB,MAPyB;;AAAA,oBAQFrB,QAAQ,CAAC,IAAD,CARN;AAAA;AAAA,MAQzBsB,OARyB;AAAA,MAQhBC,UARgB;;AAAA,oBASJvB,QAAQ,CAAC,KAAD,CATJ;AAAA;AAAA,MASzBwB,MATyB;AAAA,MASjBC,SATiB;;AAWhC1B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI2B,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjClB,MAAAA,KAAK,CACFmB,IADH,WACWC,OAAO,CAACC,GAAR,CAAYC,kBADvB,wBAC8D;AAC1DC,QAAAA,KAAK,EAAEN,YAAY,CAACC,OAAb,CAAqB,OAArB;AADmD,OAD9D,EAIGM,IAJH,CAIQ,UAACC,GAAD,EAAS;AACbpB,QAAAA,OAAO,CAACoB,GAAG,CAACC,IAAJ,CAAStB,IAAV,CAAP;AACAG,QAAAA,QAAQ,CAACkB,GAAG,CAACC,IAAJ,CAASpB,KAAV,CAAR;AACAG,QAAAA,QAAQ,CAACgB,GAAG,CAACC,IAAJ,CAASlB,KAAV,CAAR;AACAG,QAAAA,aAAa,CAACc,GAAG,CAACC,IAAJ,CAAShB,UAAV,CAAb;AACAI,QAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACD,OAVH,EAWGc,KAXH,CAWS,UAACC,GAAD,EAAS;AACdd,QAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACAV,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACD,OAdH;AAeD,KAhBD,MAgBO;AACL0B,MAAAA,WAAW,CAAC,YAAM;AAChBf,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAFU,EAER,IAFQ,CAAX;AAGAX,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACD;AACF,GAvBQ,EAuBN,CAACA,QAAD,EAAWE,OAAX,EAAoBE,QAApB,EAA8BE,QAA9B,EAAwCE,aAAxC,CAvBM,CAAT;;AAyBA,MAAMmB,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD,EAAQ;AACzB5B,IAAAA,QAAQ,iBAAU4B,EAAV,EAAR;AACD,GAFD;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACD,EAAD,EAAQ;AAC3B/B,IAAAA,KAAK,CACFmB,IADH,WACWC,OAAO,CAACC,GAAR,CAAYC,kBADvB,uBAC6D;AACzDC,MAAAA,KAAK,EAAEN,YAAY,CAACC,OAAb,CAAqB,OAArB,CADkD;AAEzDa,MAAAA,EAAE,EAAEA;AAFqD,KAD7D,EAKGP,IALH,CAKQ,UAACC,GAAD,EAAS;AACbhB,MAAAA,QAAQ,CAACgB,GAAG,CAACC,IAAJ,CAASlB,KAAV,CAAR;AACAG,MAAAA,aAAa,CAACc,GAAG,CAACC,IAAJ,CAAShB,UAAV,CAAb;AACAM,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AAEAkB,MAAAA,UAAU,CAAC,YAAM;AACfjB,QAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAbH,EAcGY,KAdH,CAcS,UAACC,GAAD,EAAS;AACd,UAAIA,GAAG,CAACM,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAC/BhC,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACD;AACF,KAlBH;AAmBD,GApBD;;AAsBA,MAAMiC,UAAU,GAAG,SAAbA,UAAa,CAACL,EAAD,EAAQ;AACzB5B,IAAAA,QAAQ,iBAAU4B,EAAV,EAAR;AACD,GAFD;;AAIA,sBACE,uDACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,WAArB;AAAiC,IAAA,MAAM,EAAEzB,KAAzC;AAAgD,IAAA,IAAI,EAAE,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BA,KAA7B,CADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACqBE,KAAK,CAAC6B,MAD3B,CAFF,CAFF,CADF,CAFF,CADF,CADF,EAiBGxB,OAAO,gBACN;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,IAAb;AAAkB,IAAA,OAAO,EAAC,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADM,gBAKN;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,MAAM,gBACL,uDACE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,KAAK,CAAC8B,OAAN,GAAgBC,GAAhB,CAAoB,UAACC,IAAD,EAAU;AAC7B,wBACE,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAC,WAAhB;AAA4B,MAAA,GAAG,EAAEA,IAAI,CAACC,GAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,IAAI,CAACE,YAAL,gBACC,oBAAC,IAAD,CAAM,GAAN;AACE,MAAA,OAAO,EAAC,KADV;AAEE,MAAA,GAAG,EAAEF,IAAI,CAACG,KAFZ;AAGE,MAAA,SAAS,EAAC,UAHZ;AAIE,MAAA,OAAO,EAAE;AAAA,eAAMb,UAAU,CAACU,IAAI,CAACC,GAAN,CAAhB;AAAA,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAOG,IARN,eASE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMX,UAAU,CAACU,IAAI,CAACC,GAAN,CAAhB;AAAA,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGD,IAAI,CAACI,KAJR,CADF,eAOE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,IAAIC,IAAJ,CAASL,IAAI,CAACM,UAAd,EAA0BC,YAA1B,EADH,CADF,eAIE;AACE,MAAA,SAAS,EAAC,UADZ;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAN;AAAA,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGlD,MAAM,CAACyC,IAAI,CAACU,QAAN,CAJT,CAJF,CAPF,eAkBE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AACE,MAAA,SAAS,EAAC,SADZ;AAEE,MAAA,OAAO,EAAE,mBAAM;AACbd,QAAAA,UAAU,CAACI,IAAI,CAACC,GAAN,CAAV;AACD,OAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eASE,oBAAC,MAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,OAAO,EAAE,mBAAM;AACbT,QAAAA,YAAY,CAACQ,IAAI,CAACC,GAAN,CAAZ;AACD,OAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF,CAlBF,CATF,CADF;AAiDD,GAlDA,CADH,CAFF,CADK,gBA0DL,uDACE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG/B,UAAU,CAAC6B,GAAX,CAAe,UAACC,IAAD,EAAU;AACxB,wBACE,oBAAC,IAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,GAAG,EAAEA,IAAI,CAACC,GAFZ;AAGE,MAAA,OAAO,EAAE,mBAAM;AACbX,QAAAA,UAAU,CAACU,IAAI,CAACC,GAAN,CAAV;AACD,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGD,IAAI,CAACE,YAAL,gBACC,oBAAC,IAAD,CAAM,GAAN;AAAU,MAAA,OAAO,EAAC,KAAlB;AAAwB,MAAA,GAAG,EAAEF,IAAI,CAACG,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAEG,IATN,eAUE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKH,IAAI,CAACI,KAAV,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4BJ,IAAI,CAACW,MAAjC,CAFF,eAGE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,IAAIN,IAAJ,CAASL,IAAI,CAACM,UAAd,EAA0BC,YAA1B,EADH,CAHF,eAME;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,OACsBP,IAAI,CAACY,KAAL,CAAWf,MADjC,eADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,OACoBG,IAAI,CAACa,QAAL,CAAchB,MADlC,cAJF,CANF,CAVF,CADF;AA4BD,GA7BA,CADH,CAFF,CA3DJ,CAtBJ,CAFF,eA0HE,oBAAC,MAAD;AAAQ,IAAA,MAAM,EAAEtB,MAAhB;AAAwB,IAAA,KAAK,EAAC,4BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1HF,eA2HE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3HF,CADF;AA+HD","sourcesContent":["import \"./Profile.css\";\n\nimport { Button, Card } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport Identicon from \"react-identicons\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport Notify from \"../Notification/Notify\";\nimport Purify from \"../../utils/Purify\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n  // eslint-disable-next-line\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [blogs, setBlogs] = useState([]);\n  const [likedBlogs, setLikedBlogs] = useState([]);\n  const [isBlog] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [notify, setNotify] = useState(false);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      axios\n        .post(`${process.env.REACT_APP_BASE_URL}/api/user/profile`, {\n          token: localStorage.getItem(\"token\"),\n        })\n        .then((res) => {\n          setName(res.data.name);\n          setEmail(res.data.email);\n          setBlogs(res.data.blogs);\n          setLikedBlogs(res.data.likedBlogs);\n          setLoading(!loading);\n        })\n        .catch((err) => {\n          setLoading(!loading);\n          navigate(\"/login\");\n        });\n    } else {\n      setInterval(() => {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  const handlePost = (id) => {\n    navigate(`/blog/${id}`);\n  };\n\n  const handleDelete = (id) => {\n    axios\n      .post(`${process.env.REACT_APP_BASE_URL}/api/user/delete`, {\n        token: localStorage.getItem(\"token\"),\n        id: id,\n      })\n      .then((res) => {\n        setBlogs(res.data.blogs);\n        setLikedBlogs(res.data.likedBlogs);\n        setNotify(!notify);\n\n        setTimeout(() => {\n          setNotify(!notify);\n        }, 1000);\n      })\n      .catch((err) => {\n        if (err.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  const handleEdit = (id) => {\n    navigate(`/edit/${id}`);\n  };\n\n  return (\n    <>\n      <NavBar />\n      <div className=\"profile-container\">\n        <div className=\"profile-card\">\n          <Card>\n            <Card.Header>Profile</Card.Header>\n            <Card.Body>\n              <div className=\"basic-profile\">\n                <Identicon className=\"user-icon\" string={email} size={85} />\n                <div>\n                  <div className=\"user-email\">{email}</div>\n                  <div className=\"user-info\">\n                    Posts Published - {blogs.length}\n                  </div>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </div>\n        {loading ? (\n          <div className=\"loader\">\n            <Loader size=\"lg\" variant=\"bars\" />\n          </div>\n        ) : (\n          <div className=\"profile-blogs\">\n            {isBlog ? (\n              <>\n                <h1 className=\"main-heading\">Your Posts</h1>\n                <div>\n                  {blogs.reverse().map((blog) => {\n                    return (\n                      <Card className=\"blog-card\" key={blog._id}>\n                        {blog.cloudinaryId ? (\n                          <Card.Img\n                            variant=\"top\"\n                            src={blog.image}\n                            className=\"blogLink\"\n                            onClick={() => handlePost(blog._id)}\n                          />\n                        ) : null}\n                        <Card.Body>\n                          <h1\n                            className=\"blogLink\"\n                            onClick={() => handlePost(blog._id)}\n                          >\n                            {blog.title}\n                          </h1>\n                          <div className=\"createdAt\">\n                            <span className=\"date\">\n                              {new Date(blog.created_at).toDateString()}\n                            </span>\n                            <span\n                              className=\"category\"\n                              onClick={() => console.log(\"Category clicked!\")}\n                            >\n                              {Purify(blog.category)}\n                            </span>\n                          </div>\n                          <div className=\"blog-items\">\n                            <Button\n                              className=\"editBtn\"\n                              onClick={() => {\n                                handleEdit(blog._id);\n                              }}\n                            >\n                              Edit\n                            </Button>\n                            <Button\n                              className=\"deleteBtn\"\n                              onClick={() => {\n                                handleDelete(blog._id);\n                              }}\n                            >\n                              Delete\n                            </Button>\n                          </div>\n                        </Card.Body>\n                      </Card>\n                    );\n                  })}\n                </div>\n              </>\n            ) : (\n              <>\n                <h1 className=\"main-heading\">Liked Blogs</h1>\n                <div>\n                  {likedBlogs.map((blog) => {\n                    return (\n                      <Card\n                        className=\"blog-card\"\n                        key={blog._id}\n                        onClick={() => {\n                          handlePost(blog._id);\n                        }}\n                      >\n                        {blog.cloudinaryId ? (\n                          <Card.Img variant=\"top\" src={blog.image} />\n                        ) : null}\n                        <Card.Body>\n                          <h1>{blog.title}</h1>\n                          <div className=\"blog-info\">{blog.author}</div>\n                          <div className=\"blog-info\">\n                            {new Date(blog.created_at).toDateString()}\n                          </div>\n                          <div className=\"blog-items\">\n                            <span>\n                              <AiOutlineHeart /> {blog.likes.length} Reactions\n                            </span>\n                            <span>\n                              <FaRegComment /> {blog.comments.length} Comments\n                            </span>\n                          </div>\n                        </Card.Body>\n                      </Card>\n                    );\n                  })}\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n      <Notify notify={notify} title=\"Post deleted successfully!\" />\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}