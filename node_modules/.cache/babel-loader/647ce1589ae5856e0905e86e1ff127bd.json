{"ast":null,"code":"import _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx\";\nimport \"./Profile.css\";\nimport { Button, Card } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport Identicon from \"react-identicons\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport NewsCardSmall from \"../NewsCards/NewsCardSmall\";\nimport Notify from \"../Notification/Notify\";\nimport Purify from \"../../utils/Purify\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function Profile() {\n  var _this = this;\n\n  var navigate = useNavigate(); // eslint-disable-next-line\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      blogs = _useState6[0],\n      setBlogs = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      likedBlogs = _useState8[0],\n      setLikedBlogs = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 1),\n      isBlog = _useState10[0];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      notify = _useState14[0],\n      setNotify = _useState14[1];\n\n  useEffect(function () {\n    if (localStorage.getItem(\"token\")) {\n      axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/profile\"), {\n        token: localStorage.getItem(\"token\")\n      }).then(function (res) {\n        setName(res.data.name);\n        setEmail(res.data.email);\n        setBlogs(res.data.blogs.reverse());\n        setLikedBlogs(res.data.likedBlogs);\n        setLoading(!loading);\n      }).catch(function (err) {\n        setLoading(!loading);\n        navigate(\"/login\");\n      });\n    } else {\n      setInterval(function () {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  var handlePost = function handlePost(id) {\n    navigate(\"/news/\".concat(id));\n  };\n\n  var handleDelete = function handleDelete(id) {\n    axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/delete\"), {\n      token: localStorage.getItem(\"token\"),\n      id: id\n    }).then(function (res) {\n      setBlogs(res.data.blogs.reverse());\n      setLikedBlogs(res.data.likedBlogs);\n      setNotify(true);\n      setTimeout(function () {\n        setNotify(false);\n      }, 3000);\n    }).catch(function (err) {\n      if (err.response.status === 401) {\n        navigate(\"/login\");\n      }\n    });\n  };\n\n  var handleEdit = function handleEdit(id) {\n    navigate(\"/edit/\".concat(id));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"Profile\"), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"basic-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Identicon, {\n    className: \"user-icon\",\n    string: email,\n    size: 85,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, \"Posts Published - \", blogs.length)))))), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    size: \"sm\",\n    variant: \"bars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-blogs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, isBlog ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, \"Your Posts\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, blogs.map(function (blog) {\n    return /*#__PURE__*/React.createElement(NewsCardSmall, {\n      key: blog._id,\n      blog: blog,\n      profile: true,\n      handlePost: handlePost,\n      handleEdit: handleEdit,\n      handleDelete: handleDelete,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 23\n      }\n    });\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, \"Liked Blogs\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, likedBlogs.map(function (blog) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"blog-card\",\n      key: blog._id,\n      onClick: function onClick() {\n        handlePost(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 23\n      }\n    }, blog.cloudinaryId ? /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"top\",\n      src: blog.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 27\n      }\n    }) : null, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 27\n      }\n    }, blog.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 27\n      }\n    }, blog.author), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 27\n      }\n    }, new Date(blog.created_at).toDateString()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AiOutlineHeart, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 31\n      }\n    }), \" \", blog.likes.length, \" Reactions\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FaRegComment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 31\n      }\n    }), \" \", blog.comments.length, \" Comments\"))));\n  }))))), /*#__PURE__*/React.createElement(Notify, {\n    notify: notify,\n    title: \"Post deleted successfully!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx"],"names":["Button","Card","React","useEffect","useState","AiOutlineHeart","FaRegComment","Footer","Identicon","Loader","NavBar","NewsCardSmall","Notify","Purify","axios","useNavigate","Profile","navigate","name","setName","email","setEmail","blogs","setBlogs","likedBlogs","setLikedBlogs","isBlog","loading","setLoading","notify","setNotify","localStorage","getItem","post","process","env","REACT_APP_BASE_URL","token","then","res","data","reverse","catch","err","setInterval","handlePost","id","handleDelete","setTimeout","response","status","handleEdit","length","map","blog","_id","cloudinaryId","image","title","author","Date","created_at","toDateString","likes","comments"],"mappings":";;AAAA,OAAO,eAAP;AAEA,SAASA,MAAT,EAAiBC,IAAjB,QAA6B,iBAA7B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAEA,SAASC,cAAT,QAA+B,gBAA/B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA;;AAChC,MAAMC,QAAQ,GAAGF,WAAW,EAA5B,CADgC,CAEhC;;AAFgC,kBAGRX,QAAQ,CAAC,EAAD,CAHA;AAAA;AAAA,MAGzBc,IAHyB;AAAA,MAGnBC,OAHmB;;AAAA,mBAINf,QAAQ,CAAC,EAAD,CAJF;AAAA;AAAA,MAIzBgB,KAJyB;AAAA,MAIlBC,QAJkB;;AAAA,mBAKNjB,QAAQ,CAAC,EAAD,CALF;AAAA;AAAA,MAKzBkB,KALyB;AAAA,MAKlBC,QALkB;;AAAA,mBAMInB,QAAQ,CAAC,EAAD,CANZ;AAAA;AAAA,MAMzBoB,UANyB;AAAA,MAMbC,aANa;;AAAA,mBAOfrB,QAAQ,CAAC,IAAD,CAPO;AAAA;AAAA,MAOzBsB,MAPyB;;AAAA,oBAQFtB,QAAQ,CAAC,IAAD,CARN;AAAA;AAAA,MAQzBuB,OARyB;AAAA,MAQhBC,UARgB;;AAAA,oBASJxB,QAAQ,CAAC,KAAD,CATJ;AAAA;AAAA,MASzByB,MATyB;AAAA,MASjBC,SATiB;;AAWhC3B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI4B,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjClB,MAAAA,KAAK,CACFmB,IADH,WACWC,OAAO,CAACC,GAAR,CAAYC,kBADvB,eACqD;AACjDC,QAAAA,KAAK,EAAEN,YAAY,CAACC,OAAb,CAAqB,OAArB;AAD0C,OADrD,EAIGM,IAJH,CAIQ,UAACC,GAAD,EAAS;AACbpB,QAAAA,OAAO,CAACoB,GAAG,CAACC,IAAJ,CAAStB,IAAV,CAAP;AACAG,QAAAA,QAAQ,CAACkB,GAAG,CAACC,IAAJ,CAASpB,KAAV,CAAR;AACAG,QAAAA,QAAQ,CAACgB,GAAG,CAACC,IAAJ,CAASlB,KAAT,CAAemB,OAAf,EAAD,CAAR;AACAhB,QAAAA,aAAa,CAACc,GAAG,CAACC,IAAJ,CAAShB,UAAV,CAAb;AACAI,QAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACD,OAVH,EAWGe,KAXH,CAWS,UAACC,GAAD,EAAS;AACdf,QAAAA,UAAU,CAAC,CAACD,OAAF,CAAV;AACAV,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACD,OAdH;AAeD,KAhBD,MAgBO;AACL2B,MAAAA,WAAW,CAAC,YAAM;AAChBhB,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OAFU,EAER,IAFQ,CAAX;AAGAX,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACD;AACF,GAvBQ,EAuBN,CAACA,QAAD,EAAWE,OAAX,EAAoBE,QAApB,EAA8BE,QAA9B,EAAwCE,aAAxC,CAvBM,CAAT;;AAyBA,MAAMoB,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD,EAAQ;AACzB7B,IAAAA,QAAQ,iBAAU6B,EAAV,EAAR;AACD,GAFD;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACD,EAAD,EAAQ;AAC3BhC,IAAAA,KAAK,CACFmB,IADH,WACWC,OAAO,CAACC,GAAR,CAAYC,kBADvB,cACoD;AAChDC,MAAAA,KAAK,EAAEN,YAAY,CAACC,OAAb,CAAqB,OAArB,CADyC;AAEhDc,MAAAA,EAAE,EAAEA;AAF4C,KADpD,EAKGR,IALH,CAKQ,UAACC,GAAD,EAAS;AACbhB,MAAAA,QAAQ,CAACgB,GAAG,CAACC,IAAJ,CAASlB,KAAT,CAAemB,OAAf,EAAD,CAAR;AACAhB,MAAAA,aAAa,CAACc,GAAG,CAACC,IAAJ,CAAShB,UAAV,CAAb;AACAM,MAAAA,SAAS,CAAC,IAAD,CAAT;AAEAkB,MAAAA,UAAU,CAAC,YAAM;AACflB,QAAAA,SAAS,CAAC,KAAD,CAAT;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAbH,EAcGY,KAdH,CAcS,UAACC,GAAD,EAAS;AACd,UAAIA,GAAG,CAACM,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAC/BjC,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACD;AACF,KAlBH;AAmBD,GApBD;;AAsBA,MAAMkC,UAAU,GAAG,SAAbA,UAAa,CAACL,EAAD,EAAQ;AACzB7B,IAAAA,QAAQ,iBAAU6B,EAAV,EAAR;AACD,GAFD;;AAIA,sBACE,uDACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,WAArB;AAAiC,IAAA,MAAM,EAAE1B,KAAzC;AAAgD,IAAA,IAAI,EAAE,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BA,KAA7B,CADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACqBE,KAAK,CAAC8B,MAD3B,CAFF,CAFF,CADF,CAFF,CADF,CADF,EAiBGzB,OAAO,gBACN;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,IAAb;AAAkB,IAAA,OAAO,EAAC,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADM,gBAKN;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,MAAM,gBACL,uDACE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,KAAK,CAAC+B,GAAN,CAAU,UAACC,IAAD,EAAU;AACnB,wBACE,oBAAC,aAAD;AACE,MAAA,GAAG,EAAEA,IAAI,CAACC,GADZ;AAEE,MAAA,IAAI,EAAED,IAFR;AAGE,MAAA,OAAO,EAAE,IAHX;AAIE,MAAA,UAAU,EAAET,UAJd;AAKE,MAAA,UAAU,EAAEM,UALd;AAME,MAAA,YAAY,EAAEJ,YANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAUD,GAXA,CADH,CAFF,CADK,gBAmBL,uDACE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGvB,UAAU,CAAC6B,GAAX,CAAe,UAACC,IAAD,EAAU;AACxB,wBACE,oBAAC,IAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,GAAG,EAAEA,IAAI,CAACC,GAFZ;AAGE,MAAA,OAAO,EAAE,mBAAM;AACbV,QAAAA,UAAU,CAACS,IAAI,CAACC,GAAN,CAAV;AACD,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGD,IAAI,CAACE,YAAL,gBACC,oBAAC,IAAD,CAAM,GAAN;AAAU,MAAA,OAAO,EAAC,KAAlB;AAAwB,MAAA,GAAG,EAAEF,IAAI,CAACG,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAEG,IATN,eAUE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKH,IAAI,CAACI,KAAV,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4BJ,IAAI,CAACK,MAAjC,CAFF,eAGE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,IAAIC,IAAJ,CAASN,IAAI,CAACO,UAAd,EAA0BC,YAA1B,EADH,CAHF,eAME;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,OACsBR,IAAI,CAACS,KAAL,CAAWX,MADjC,eADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,OACoBE,IAAI,CAACU,QAAL,CAAcZ,MADlC,cAJF,CANF,CAVF,CADF;AA4BD,GA7BA,CADH,CAFF,CApBJ,CAtBJ,CAFF,eAmFE,oBAAC,MAAD;AAAQ,IAAA,MAAM,EAAEvB,MAAhB;AAAwB,IAAA,KAAK,EAAC,4BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnFF,eAoFE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApFF,CADF;AAwFD","sourcesContent":["import \"./Profile.css\";\n\nimport { Button, Card } from \"react-bootstrap\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport Identicon from \"react-identicons\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport NewsCardSmall from \"../NewsCards/NewsCardSmall\";\nimport Notify from \"../Notification/Notify\";\nimport Purify from \"../../utils/Purify\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n  // eslint-disable-next-line\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [blogs, setBlogs] = useState([]);\n  const [likedBlogs, setLikedBlogs] = useState([]);\n  const [isBlog] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const [notify, setNotify] = useState(false);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      axios\n        .post(`${process.env.REACT_APP_BASE_URL}/profile`, {\n          token: localStorage.getItem(\"token\"),\n        })\n        .then((res) => {\n          setName(res.data.name);\n          setEmail(res.data.email);\n          setBlogs(res.data.blogs.reverse());\n          setLikedBlogs(res.data.likedBlogs);\n          setLoading(!loading);\n        })\n        .catch((err) => {\n          setLoading(!loading);\n          navigate(\"/login\");\n        });\n    } else {\n      setInterval(() => {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  const handlePost = (id) => {\n    navigate(`/news/${id}`);\n  };\n\n  const handleDelete = (id) => {\n    axios\n      .post(`${process.env.REACT_APP_BASE_URL}/delete`, {\n        token: localStorage.getItem(\"token\"),\n        id: id,\n      })\n      .then((res) => {\n        setBlogs(res.data.blogs.reverse());\n        setLikedBlogs(res.data.likedBlogs);\n        setNotify(true);\n\n        setTimeout(() => {\n          setNotify(false);\n        }, 3000);\n      })\n      .catch((err) => {\n        if (err.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  const handleEdit = (id) => {\n    navigate(`/edit/${id}`);\n  };\n\n  return (\n    <>\n      <NavBar />\n      <div className=\"profile-container\">\n        <div className=\"profile-card\">\n          <Card>\n            <Card.Header>Profile</Card.Header>\n            <Card.Body>\n              <div className=\"basic-profile\">\n                <Identicon className=\"user-icon\" string={email} size={85} />\n                <div>\n                  <div className=\"user-email\">{email}</div>\n                  <div className=\"user-info\">\n                    Posts Published - {blogs.length}\n                  </div>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n        </div>\n        {loading ? (\n          <div className=\"loader\">\n            <Loader size=\"sm\" variant=\"bars\" />\n          </div>\n        ) : (\n          <div className=\"profile-blogs\">\n            {isBlog ? (\n              <>\n                <h1 className=\"main-heading\">Your Posts</h1>\n                <div>\n                  {blogs.map((blog) => {\n                    return (\n                      <NewsCardSmall\n                        key={blog._id}\n                        blog={blog}\n                        profile={true}\n                        handlePost={handlePost}\n                        handleEdit={handleEdit}\n                        handleDelete={handleDelete}\n                      />\n                    );\n                  })}\n                </div>\n              </>\n            ) : (\n              <>\n                <h1 className=\"main-heading\">Liked Blogs</h1>\n                <div>\n                  {likedBlogs.map((blog) => {\n                    return (\n                      <Card\n                        className=\"blog-card\"\n                        key={blog._id}\n                        onClick={() => {\n                          handlePost(blog._id);\n                        }}\n                      >\n                        {blog.cloudinaryId ? (\n                          <Card.Img variant=\"top\" src={blog.image} />\n                        ) : null}\n                        <Card.Body>\n                          <h1>{blog.title}</h1>\n                          <div className=\"blog-info\">{blog.author}</div>\n                          <div className=\"blog-info\">\n                            {new Date(blog.created_at).toDateString()}\n                          </div>\n                          <div className=\"blog-items\">\n                            <span>\n                              <AiOutlineHeart /> {blog.likes.length} Reactions\n                            </span>\n                            <span>\n                              <FaRegComment /> {blog.comments.length} Comments\n                            </span>\n                          </div>\n                        </Card.Body>\n                      </Card>\n                    );\n                  })}\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n      <Notify notify={notify} title=\"Post deleted successfully!\" />\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}