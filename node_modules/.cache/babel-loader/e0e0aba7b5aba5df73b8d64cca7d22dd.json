{"ast":null,"code":"import _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx\";\nimport \"./Profile.css\";\nimport { LayoutGridAdd, Logout, Settings } from \"tabler-icons-react\";\nimport React, { useEffect, useState } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { Button } from \"@mantine/core\";\nimport { Card } from \"react-bootstrap\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport NewsCardSmall from \"../NewsCards/NewsCardSmall\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nexport default function Profile() {\n  var _this = this;\n\n  var navigate = useNavigate();\n\n  var notifySuccess = function notifySuccess(_ref) {\n    var setLoggedIn = _ref.setLoggedIn;\n    return toast.success(\"Deleted Successfully!\");\n  };\n\n  var notifyError = function notifyError(message) {\n    return toast.error(message);\n  }; // eslint-disable-next-line\n\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      blogs = _useState6[0],\n      setBlogs = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      likedBlogs = _useState8[0],\n      setLikedBlogs = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 1),\n      isBlog = _useState10[0];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  useEffect(function () {\n    if (localStorage.getItem(\"token\")) {\n      axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/profile\"), {\n        token: localStorage.getItem(\"token\")\n      }).then(function (res) {\n        setName(res.data.name);\n        setEmail(res.data.email);\n        setBlogs(res.data.blogs.reverse());\n        setLikedBlogs(res.data.likedBlogs);\n        setLoading(!loading);\n      }).catch(function (err) {\n        setLoading(!loading);\n        navigate(\"/login\");\n      });\n    } else {\n      setInterval(function () {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  var handlePost = function handlePost(id) {\n    navigate(\"/news/\".concat(id));\n  };\n\n  var handleDelete = function handleDelete(id) {\n    axios.post(\"\".concat(process.env.REACT_APP_BASE_URL, \"/delete\"), {\n      token: localStorage.getItem(\"token\"),\n      id: id\n    }).then(function (res) {\n      notifySuccess();\n      setBlogs(res.data.blogs.reverse());\n    }).catch(function (err) {\n      notifyError(err.response.data.error);\n\n      if (err.response.status === 401) {\n        navigate(\"/login\");\n      }\n    });\n  };\n\n  var logout = function logout() {\n    localStorage.removeItem(\"token\");\n    navigate(\"/\");\n  };\n\n  var handleEdit = function handleEdit(id) {\n    navigate(\"/edit/\".concat(id));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Profile\"), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"basic-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }\n  }, email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, \"Posts Published - \", blogs.length))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    radius: \"sm\",\n    color: \"dark\",\n    variant: \"default\",\n    className: \"tab-buttons\",\n    onClick: function onClick() {\n      return navigate(\"/create\");\n    },\n    leftIcon: /*#__PURE__*/React.createElement(LayoutGridAdd, {\n      size: 25,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"Create Post\"), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    radius: \"sm\",\n    color: \"dark\",\n    variant: \"default\",\n    className: \"tab-buttons\",\n    onClick: function onClick() {\n      return navigate(\"/setting\");\n    },\n    leftIcon: /*#__PURE__*/React.createElement(Settings, {\n      size: 25,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, \"Setting\"), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    radius: \"sm\",\n    color: \"dark\",\n    variant: \"default\",\n    className: \"tab-buttons\",\n    onClick: function onClick() {\n      return logout();\n    },\n    leftIcon: /*#__PURE__*/React.createElement(Logout, {\n      size: 25,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, \"Logout\"))), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    size: \"sm\",\n    variant: \"bars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-blogs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, isBlog ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, \"Your Posts\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, blogs.map(function (blog) {\n    return /*#__PURE__*/React.createElement(NewsCardSmall, {\n      blog: blog,\n      key: blog._id,\n      profile: true,\n      handlePost: handlePost,\n      handleEdit: handleEdit,\n      handleDelete: handleDelete,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 23\n      }\n    });\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"main-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, \"Liked Blogs\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, likedBlogs.map(function (blog) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"blog-card\",\n      key: blog._id,\n      onClick: function onClick() {\n        handlePost(blog._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 23\n      }\n    }, blog.cloudinaryId ? /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"top\",\n      src: blog.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 27\n      }\n    }) : null, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 27\n      }\n    }, blog.title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 27\n      }\n    }, blog.author), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 27\n      }\n    }, new Date(blog.created_at).toDateString()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-items\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AiOutlineHeart, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 31\n      }\n    }), \" \", blog.likes.length, \" Reactions\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FaRegComment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 31\n      }\n    }), \" \", blog.comments.length, \" Comments\"))));\n  }))))), /*#__PURE__*/React.createElement(Toaster, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/allie/Project/client-thecurrent/src/components/Profile/Profile.jsx"],"names":["LayoutGridAdd","Logout","Settings","React","useEffect","useState","toast","Toaster","AiOutlineHeart","Button","Card","FaRegComment","Footer","Loader","NavBar","NewsCardSmall","axios","useNavigate","Profile","navigate","notifySuccess","setLoggedIn","success","notifyError","message","error","name","setName","email","setEmail","blogs","setBlogs","likedBlogs","setLikedBlogs","isBlog","loading","setLoading","localStorage","getItem","post","process","env","REACT_APP_BASE_URL","token","then","res","data","reverse","catch","err","setInterval","handlePost","id","handleDelete","response","status","logout","removeItem","handleEdit","length","map","blog","_id","cloudinaryId","image","title","author","Date","created_at","toDateString","likes","comments"],"mappings":"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","sourcesContent":["import \"./Profile.css\";\n\nimport { LayoutGridAdd, Logout, Settings } from \"tabler-icons-react\";\nimport React, { useEffect, useState } from \"react\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { Button } from \"@mantine/core\";\nimport { Card } from \"react-bootstrap\";\nimport { FaRegComment } from \"react-icons/fa\";\nimport Footer from \"../Footer/Footer\";\nimport { Loader } from \"@mantine/core\";\nimport NavBar from \"../NavBar/NavBar\";\nimport NewsCardSmall from \"../NewsCards/NewsCardSmall\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n\n  const notifySuccess = ({ setLoggedIn }) =>\n    toast.success(\"Deleted Successfully!\");\n  const notifyError = (message) => toast.error(message);\n\n  // eslint-disable-next-line\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [blogs, setBlogs] = useState([]);\n  const [likedBlogs, setLikedBlogs] = useState([]);\n  const [isBlog] = useState(true);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      axios\n        .post(`${process.env.REACT_APP_BASE_URL}/profile`, {\n          token: localStorage.getItem(\"token\"),\n        })\n        .then((res) => {\n          setName(res.data.name);\n          setEmail(res.data.email);\n          setBlogs(res.data.blogs.reverse());\n          setLikedBlogs(res.data.likedBlogs);\n          setLoading(!loading);\n        })\n        .catch((err) => {\n          setLoading(!loading);\n          navigate(\"/login\");\n        });\n    } else {\n      setInterval(() => {\n        setLoading(false);\n      }, 1000);\n      navigate(\"/login\");\n    }\n  }, [navigate, setName, setEmail, setBlogs, setLikedBlogs]);\n\n  const handlePost = (id) => {\n    navigate(`/news/${id}`);\n  };\n\n  const handleDelete = (id) => {\n    axios\n      .post(`${process.env.REACT_APP_BASE_URL}/delete`, {\n        token: localStorage.getItem(\"token\"),\n        id: id,\n      })\n      .then((res) => {\n        notifySuccess();\n        setBlogs(res.data.blogs.reverse());\n      })\n      .catch((err) => {\n        notifyError(err.response.data.error);\n        if (err.response.status === 401) {\n          navigate(\"/login\");\n        }\n      });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    navigate(\"/\");\n  };\n\n  const handleEdit = (id) => {\n    navigate(`/edit/${id}`);\n  };\n\n  return (\n    <>\n      <NavBar />\n      <div className=\"profile-container\">\n        <div className=\"profile-card\">\n          <Card>\n            <Card.Header>Profile</Card.Header>\n            <Card.Body>\n              <div className=\"basic-profile\">\n                <div>\n                  <div className=\"user-email\">{email}</div>\n                  <div className=\"user-info\">\n                    Posts Published - {blogs.length}\n                  </div>\n                </div>\n              </div>\n            </Card.Body>\n          </Card>\n\n          <div className=\"tab\">\n            <Button\n              fullWidth\n              radius=\"sm\"\n              color=\"dark\"\n              variant=\"default\"\n              className=\"tab-buttons\"\n              onClick={() => navigate(\"/create\")}\n              leftIcon={<LayoutGridAdd size={25} />}\n            >\n              Create Post\n            </Button>\n            <Button\n              fullWidth\n              radius=\"sm\"\n              color=\"dark\"\n              variant=\"default\"\n              className=\"tab-buttons\"\n              onClick={() => navigate(\"/setting\")}\n              leftIcon={<Settings size={25} />}\n            >\n              Setting\n            </Button>\n            <Button\n              fullWidth\n              radius=\"sm\"\n              color=\"dark\"\n              variant=\"default\"\n              className=\"tab-buttons\"\n              onClick={() => logout()}\n              leftIcon={<Logout size={25} />}\n            >\n              Logout\n            </Button>\n          </div>\n        </div>\n        {loading ? (\n          <div className=\"loader\">\n            <Loader size=\"sm\" variant=\"bars\" />\n          </div>\n        ) : (\n          <div className=\"profile-blogs\">\n            {isBlog ? (\n              <>\n                <h1 className=\"main-heading\">Your Posts</h1>\n                <div>\n                  {blogs.map((blog) => {\n                    return (\n                      <NewsCardSmall\n                        blog={blog}\n                        key={blog._id}\n                        profile={true}\n                        handlePost={handlePost}\n                        handleEdit={handleEdit}\n                        handleDelete={handleDelete}\n                      />\n                    );\n                  })}\n                </div>\n              </>\n            ) : (\n              <>\n                <h1 className=\"main-heading\">Liked Blogs</h1>\n                <div>\n                  {likedBlogs.map((blog) => {\n                    return (\n                      <Card\n                        className=\"blog-card\"\n                        key={blog._id}\n                        onClick={() => {\n                          handlePost(blog._id);\n                        }}\n                      >\n                        {blog.cloudinaryId ? (\n                          <Card.Img variant=\"top\" src={blog.image} />\n                        ) : null}\n                        <Card.Body>\n                          <h1>{blog.title}</h1>\n                          <div className=\"blog-info\">{blog.author}</div>\n                          <div className=\"blog-info\">\n                            {new Date(blog.created_at).toDateString()}\n                          </div>\n                          <div className=\"blog-items\">\n                            <span>\n                              <AiOutlineHeart /> {blog.likes.length} Reactions\n                            </span>\n                            <span>\n                              <FaRegComment /> {blog.comments.length} Comments\n                            </span>\n                          </div>\n                        </Card.Body>\n                      </Card>\n                    );\n                  })}\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n      <Toaster />\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}