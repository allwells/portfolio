{"ast":null,"code":"import _defineProperty from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/allie/Project/client-thecurrent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport { useScrollIntoView } from '@mantine/hooks';\nimport { SelectScrollArea } from '../../Select/SelectScrollArea/SelectScrollArea.js';\nimport { Divider } from '../../Divider/Divider.js';\nimport useStyles from './RenderList.styles.js';\nimport { groupOptions } from '../../../utils/group-options/group-options.js';\nimport { UnstyledButton } from '../../Button/UnstyledButton/UnstyledButton.js';\nimport { Text } from '../../Text/Text.js';\nimport { TextInput } from '../../TextInput/TextInput.js';\nimport { ActionIcon } from '../../ActionIcon/ActionIcon.js';\nimport { PrevIcon } from '../../Pagination/icons/PrevIcon.js';\nimport { NextIcon } from '../../Pagination/icons/NextIcon.js';\nimport { FirstIcon } from '../../Pagination/icons/FirstIcon.js';\nimport { LastIcon } from '../../Pagination/icons/LastIcon.js';\nvar icons = {\n  Prev: PrevIcon,\n  Next: NextIcon,\n  First: FirstIcon,\n  Last: LastIcon\n};\nvar rtlIons = {\n  Next: PrevIcon,\n  Prev: NextIcon,\n  Last: FirstIcon,\n  First: LastIcon\n};\n\nfunction RenderList(_ref) {\n  var className = _ref.className,\n      data = _ref.data,\n      onSelect = _ref.onSelect,\n      selection = _ref.selection,\n      ItemComponent = _ref.itemComponent,\n      listComponent = _ref.listComponent,\n      searchPlaceholder = _ref.searchPlaceholder,\n      filter = _ref.filter,\n      nothingFound = _ref.nothingFound,\n      title = _ref.title,\n      showTransferAll = _ref.showTransferAll,\n      reversed = _ref.reversed,\n      onMoveAll = _ref.onMoveAll,\n      onMove = _ref.onMove,\n      height = _ref.height,\n      radius = _ref.radius,\n      classNames = _ref.classNames,\n      styles = _ref.styles,\n      limit = _ref.limit;\n\n  var _useStyles = useStyles({\n    reversed: reversed,\n    native: listComponent !== SelectScrollArea,\n    radius: radius\n  }, {\n    name: \"TransferList\",\n    classNames: classNames,\n    styles: styles\n  }),\n      classes = _useStyles.classes,\n      cx = _useStyles.cx,\n      theme = _useStyles.theme;\n\n  var unGroupedItems = [];\n  var groupedItems = [];\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      query = _useState2[0],\n      setQuery = _useState2[1];\n\n  var _useState3 = useState(-1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hovered = _useState4[0],\n      setHovered = _useState4[1];\n\n  var filteredData = data.filter(function (item) {\n    return filter(query, item);\n  }).slice(0, limit);\n  var ListComponent = listComponent || \"div\";\n  var Icons = theme.dir === \"rtl\" ? rtlIons : icons;\n  var itemsRefs = useRef({});\n  var sortedData = groupOptions({\n    data: filteredData\n  });\n\n  var _useScrollIntoView = useScrollIntoView({\n    duration: 0,\n    offset: 5,\n    cancelable: false,\n    isList: true\n  }),\n      scrollIntoView = _useScrollIntoView.scrollIntoView,\n      targetRef = _useScrollIntoView.targetRef,\n      scrollableRef = _useScrollIntoView.scrollableRef;\n\n  var groupName = null;\n  sortedData.forEach(function (item, index) {\n    var itemComponent = /* @__PURE__ */React.createElement(UnstyledButton, {\n      tabIndex: -1,\n      onClick: function onClick() {\n        return onSelect(item.value);\n      },\n      key: item.value,\n      onMouseEnter: function onMouseEnter() {\n        return setHovered(index);\n      },\n      className: cx(classes.transferListItem, _defineProperty({}, classes.transferListItemHovered, index === hovered)),\n      ref: function ref(node) {\n        if (itemsRefs && itemsRefs.current) {\n          itemsRefs.current[item.value] = node;\n        }\n      }\n    }, /* @__PURE__ */React.createElement(ItemComponent, {\n      data: item,\n      selected: selection.includes(item.value),\n      radius: radius\n    }));\n\n    if (!item.group) {\n      unGroupedItems.push(itemComponent);\n    } else {\n      if (groupName !== item.group) {\n        groupName = item.group;\n        groupedItems.push( /* @__PURE__ */React.createElement(\"div\", {\n          className: classes.separator,\n          key: groupName\n        }, /* @__PURE__ */React.createElement(Divider, {\n          classNames: {\n            label: classes.separatorLabel\n          },\n          label: groupName\n        })));\n      }\n\n      groupedItems.push(itemComponent);\n    }\n  });\n\n  if (groupedItems.length > 0 && unGroupedItems.length > 0) {\n    unGroupedItems.unshift( /* @__PURE__ */React.createElement(\"div\", {\n      className: classes.separator\n    }, /* @__PURE__ */React.createElement(Divider, {\n      classNames: {\n        label: classes.separatorLabel\n      }\n    })));\n  }\n\n  var handleSearchKeydown = function handleSearchKeydown(event) {\n    switch (event.code) {\n      case \"Enter\":\n        {\n          event.preventDefault();\n\n          if (filteredData[hovered]) {\n            onSelect(filteredData[hovered].value);\n          }\n\n          break;\n        }\n\n      case \"ArrowDown\":\n        {\n          event.preventDefault();\n          setHovered(function (current) {\n            var _a;\n\n            var nextIndex = current < filteredData.length - 1 ? current + 1 : current;\n            targetRef.current = itemsRefs.current[(_a = filteredData[nextIndex]) == null ? void 0 : _a.value];\n            scrollIntoView({\n              alignment: \"end\"\n            });\n            return nextIndex;\n          });\n          break;\n        }\n\n      case \"ArrowUp\":\n        {\n          event.preventDefault();\n          setHovered(function (current) {\n            var _a;\n\n            var nextIndex = current > 0 ? current - 1 : current;\n            targetRef.current = itemsRefs.current[(_a = filteredData[nextIndex]) == null ? void 0 : _a.value];\n            scrollIntoView({\n              alignment: \"start\"\n            });\n            return nextIndex;\n          });\n        }\n    }\n  };\n\n  return /* @__PURE__ */React.createElement(\"div\", {\n    className: cx(classes.transferList, className)\n  }, title && /* @__PURE__ */React.createElement(Text, {\n    weight: 500,\n    className: classes.transferListTitle\n  }, title), /* @__PURE__ */React.createElement(\"div\", {\n    className: classes.transferListBody\n  }, /* @__PURE__ */React.createElement(\"div\", {\n    className: classes.transferListHeader\n  }, /* @__PURE__ */React.createElement(TextInput, {\n    value: query,\n    onChange: function onChange(event) {\n      setQuery(event.currentTarget.value);\n      setHovered(0);\n    },\n    onFocus: function onFocus() {\n      return setHovered(0);\n    },\n    onBlur: function onBlur() {\n      return setHovered(-1);\n    },\n    placeholder: searchPlaceholder,\n    radius: 0,\n    onKeyDown: handleSearchKeydown,\n    sx: {\n      flex: 1\n    },\n    classNames: {\n      input: classes.transferListSearch\n    }\n  }), /* @__PURE__ */React.createElement(ActionIcon, {\n    variant: \"default\",\n    size: 36,\n    radius: 0,\n    className: classes.transferListControl,\n    disabled: selection.length === 0,\n    onClick: onMove\n  }, reversed ? /* @__PURE__ */React.createElement(Icons.Prev, null) : /* @__PURE__ */React.createElement(Icons.Next, null)), showTransferAll && /* @__PURE__ */React.createElement(ActionIcon, {\n    variant: \"default\",\n    size: 36,\n    radius: 0,\n    className: classes.transferListControl,\n    disabled: data.length === 0,\n    onClick: onMoveAll\n  }, reversed ? /* @__PURE__ */React.createElement(Icons.First, null) : /* @__PURE__ */React.createElement(Icons.Last, null))), /* @__PURE__ */React.createElement(ListComponent, {\n    ref: scrollableRef,\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(-1);\n    },\n    className: classes.transferListItems,\n    style: {\n      height: height,\n      position: \"relative\",\n      overflowX: \"hidden\"\n    }\n  }, groupedItems.length > 0 || unGroupedItems.length > 0 ? /* @__PURE__ */React.createElement(React.Fragment, null, groupedItems, unGroupedItems) : /* @__PURE__ */React.createElement(Text, {\n    color: \"dimmed\",\n    size: \"sm\",\n    align: \"center\",\n    mt: \"sm\"\n  }, nothingFound))));\n}\n\nRenderList.displayName = \"@mantine/core/RenderList\";\nexport { RenderList };","map":null,"metadata":{},"sourceType":"module"}